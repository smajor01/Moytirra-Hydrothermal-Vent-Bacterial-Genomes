# Differential Expression Analysis
# First start with R. 

# Remove the quotations from the file written from R.
sed -ie 's/"//g' OXR-9_padj_trans.txt

# copy paste from the padj_trans file to new file in Notepad++ to avoid windows v linux issues.
grep -wf file.txt trycycler/eggNOG_annotations/out.emapper.decorated.gff > OXR-9_diff_expr.txt

# Take the OXR-9_diff_expr.txt file and keep the 9th column to query for em_KEGG_Pathway
awk 'BEGIN {FS="\t"} {print $9}' OXR-9_diff_expr.txt > OXR-9_diff_expr_2.txt

# take the em_ID, which corresponds to another alternative identification in the out.emapper.annotation table
awk 'BEGIN {FS=";"} {print $14}' OXR-9_diff_expr_2.txt > em_ID.txt

# remove blank lines
sed -ie '/^\s*$/d' em_ID.txt

# remove teh em_ID= from each lines
sed -i 's/em_ID=//' em_ID.txt

# take the names in the em_ID.txt file and match them to the annotations file
grep -wf em_ID.txt trycycler/eggNOG_annotations/out.emapper.annotations > diff_expr_annotations.txt

# take the 5th row that from the out.emapper.annotations file
awk 'NR == 5' trycycler/eggNOG_annotations/out.emapper.annotations > headers.txt

# concatenate the headers with the diff_expr_annotations.txt
cat headers.txt diff_expr_annotations.txt > OXR-9_diff_expr_annotations.txt